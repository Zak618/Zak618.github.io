<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Создай свой дом</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .task-list {
            margin-top: 20px;
        }
        .task {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .task .status {
            margin-right: 10px;
        }
        .task.completed .status {
            color: green;
        }
        .task.completed .status:before {
            content: '✔️';
        }
        .task.not-completed .status {
            color: red;
        }
        .task.not-completed .status:before {
            content: '❌';
        }
        .code-area {
            margin-top: 20px;
        }
        .code-area textarea {
            width: 100%;
            height: 150px;
            margin-bottom: 10px;
            font-family: monospace;
        }
        .preview {
            border: 1px solid #ddd;
            height: 400px;
            margin-top: 20px;
            position: relative;
        }
        .guide {
            margin-top: 20px;
        }
        .guide ul {
            list-style-type: none;
            padding-left: 0;
        }
        .guide li {
            margin-bottom: 10px;
        }
        .instruction {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
        .hint {
            display: none;
            margin-top: 10px;
        }
        .foundation {
            background-color: #8B4513;
            height: 20px;
            width: 100%;
            position: absolute;
            bottom: 0;
        }
        .walls {
            background-color: #D3D3D3;
            height: 200px;
            width: 200px;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            border: 2px solid #000;
        }
        .roof {
            width: 0;
            height: 0;
            border-left: 110px solid transparent;
            border-right: 110px solid transparent;
            border-bottom: 100px solid #A52A2A;
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
        }
        .window {
            width: 40px;
            height: 40px;
            background-color: #FFF;
            border: 2px solid #000;
            position: absolute;
            top: 30px;
        }
        .window.left {
            left: 20px;
        }
        .window.right {
            right: 20px;
        }
        .door {
            width: 60px;
            height: 100px;
            background-color: #A52A2A;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            border: 2px solid #000;
        }
        .doorknob {
            width: 10px;
            height: 10px;
            background-color: #DAA520;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mt-5">Создай свой дом</h1>
        <div id="instructions" class="instruction">
            <h2>Шаг 1: Создать фундамент</h2>
            <p>Напишите HTML и CSS код для фундамента. Используйте элемент <code>&lt;div class="foundation"&gt;&lt;/div&gt;</code>.</p>
            <p>CSS должен содержать правила для:</p>
            <ul>
                <li>Ширина: 100% (чтобы фундамент занимал всю ширину контейнера)</li>
                <li>Высота: 20px (высота фундамента)</li>
                <li>Цвет фона: коричневый (чтобы фундамент был коричневым)</li>
                <li>Позиционирование: absolute (чтобы закрепить фундамент внизу контейнера)</li>
                <li>Нижний отступ: 0 (чтобы фундамент был внизу контейнера)</li>
            </ul>
            <button class="btn btn-secondary" onclick="showHint(1)">Показать помощь</button>
            <button class="btn btn-secondary" onclick="hideHint(1)" style="display:none;">Скрыть помощь</button>
            <pre id="hint1" class="hint"><code>.foundation {
    width: 100%;
    height: 20px;
    background-color: #8B4513;
    position: absolute;
    bottom: 0;
}</code></pre>
        </div>
        <div class="task-list">
            <div class="task not-completed" data-task="foundation">
                <div class="status"></div>
                <div>Создать фундамент</div>
            </div>
            <div class="task not-completed" data-task="walls">
                <div class="status"></div>
                <div>Построить стены</div>
            </div>
            <div class="task not-completed" data-task="roof">
                <div class="status"></div>
                <div>Построить крышу</div>
            </div>
            <div class="task not-completed" data-task="windows">
                <div class="status"></div>
                <div>Добавить окна</div>
            </div>
            <div class="task not-completed" data-task="door">
                <div class="status"></div>
                <div>Установить дверь</div>
            </div>
        </div>
        <div class="code-area">
            <textarea id="htmlCode" placeholder="Введите HTML код здесь"></textarea>
            <textarea id="cssCode" placeholder="Введите CSS код здесь"></textarea>
        </div>
        <div class="preview">
            <iframe id="previewFrame" style="width: 100%; height: 100%;"></iframe>
        </div>
    </div>

    <script>
        let currentStep = 1;

        document.getElementById('htmlCode').addEventListener('input', updatePreview);
        document.getElementById('cssCode').addEventListener('input', updatePreview);

        function updatePreview() {
            const htmlCode = document.getElementById('htmlCode').value;
            const cssCode = "<style>" + document.getElementById('cssCode').value + "</style>";
            const previewFrame = document.getElementById('previewFrame');
            const preview = previewFrame.contentDocument || previewFrame.contentWindow.document;
            preview.open();
            preview.write(htmlCode + cssCode);
            preview.close();

            checkTasksCompletion();
        }

        function checkTasksCompletion() {
            const tasks = [
                { name: 'foundation', htmlCondition: /class="foundation"/, cssCondition: /\.foundation\s*\{[^}]*background-color:\s*#8B4513[^}]*\}/ },
                { name: 'walls', htmlCondition: /class="walls"/, cssCondition: /\.walls\s*\{[^}]*background-color:\s*#D3D3D3[^}]*\}/ },
                { name: 'roof', htmlCondition: /class="roof"/, cssCondition: /\.roof\s*\{[^}]*border-bottom:\s*100px\s*solid\s*#A52A2A[^}]*\}/ },
                { name: 'windows', htmlCondition: /class="window"/, cssCondition: /\.window\s*\{[^}]*background-color:\s*#FFF[^}]*\}/ },
                { name: 'door', htmlCondition: /class="door"/, cssCondition: /\.door\s*\{[^}]*background-color:\s*#A52A2A[^}]*\}/ }
            ];

            let completed = true;
            tasks.forEach((task, index) => {
                const htmlCode = document.getElementById('htmlCode').value;
                const cssCode = document.getElementById('cssCode').value;
                const taskElement = document.querySelector(`.task[data-task="${task.name}"]`);
                if (task.htmlCondition.test(htmlCode) && task.cssCondition.test(cssCode)) {
                    if (taskElement.classList.contains('not-completed')) {
                        taskElement.classList.remove('not-completed');
                        taskElement.classList.add('completed');
                    }
                } else {
                    completed = false;
                    if (taskElement.classList.contains('completed')) {
                        taskElement.classList.remove('completed');
                        taskElement.classList.add('not-completed');
                    }
                }

                if (completed && index + 1 === currentStep) {
                    nextStep();
                }
            });
        }

        function nextStep() {
            currentStep++;
            const instructions = document.getElementById('instructions');
            switch (currentStep) {
                case 2:
                    instructions.innerHTML = `
                        <h2>Шаг 2: Построить стены</h2>
                        <p>Напишите HTML код для стен. Используйте элемент <code>&lt;div class="walls"&gt;&lt;/div&gt;</code>.</p>
                        <p>CSS должен содержать правила для:</p>
                        <ul>
                            <li>Ширина: 200px (чтобы стены занимали 200 пикселей ширины)</li>
                            <li>Высота: 200px (высота стен)</li>
                            <li>Цвет фона: светло-серый (чтобы стены были светло-серыми)</li>
                            <li>Позиционирование: absolute (чтобы закрепить стены над фундаментом)</li>
                            <li>Нижний отступ: 20px (чтобы стены были над фундаментом)</li>
                            <li>Левый отступ: 50% (чтобы центрировать стены)</li>
                            <li>Трансформация: translateX(-50%) (чтобы центрировать стены по горизонтали)</li>
                        </ul>
                        <button class="btn btn-secondary" onclick="showHint(2)">Показать помощь</button>
                        <button class="btn btn-secondary" onclick="hideHint(2)" style="display:none;">Скрыть помощь</button>
                        <pre id="hint2" class="hint"><code>.walls {
    width: 200px;
    height: 200px;
    background-color: #D3D3D3;
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    border: 2px solid #000;
}</code></pre>
                    `;
                    break;
                case 3:
                    instructions.innerHTML = `
                        <h2>Шаг 3: Построить крышу</h2>
                        <p>Напишите HTML код для крыши. Используйте элемент <code>&lt;div class="roof"&gt;&lt;/div&gt;</code>.</p>
                        <p>CSS должен содержать правила для:</p>
                        <ul>
                            <li>Ширина: 0 (нулевая ширина, потому что мы будем использовать границы)</li>
                            <li>Высота: 0 (нулевая высота, потому что мы будем использовать границы)</li>
                            <li>Левая граница: 110px solid transparent (треугольник)</li>
                            <li>Правая граница: 110px solid transparent (треугольник)</li>
                            <li>Нижняя граница: 100px solid #A52A2A (чтобы создать красную крышу)</li>
                            <li>Позиционирование: absolute (чтобы закрепить крышу над стенами)</li>
                            <li>Верхний отступ: -80px (чтобы крыша была на верхушке стен)</li>
                            <li>Левый отступ: 50% (чтобы центрировать крышу)</li>
                            <li>Трансформация: translateX(-50%) (чтобы центрировать крышу по горизонтали)</li>
                        </ul>
                        <button class="btn btn-secondary" onclick="showHint(3)">Показать помощь</button>
                        <button class="btn btn-secondary" onclick="hideHint(3)" style="display:none;">Скрыть помощь</button>
                        <pre id="hint3" class="hint"><code>.roof {
    width: 0;
    height: 0;
    border-left: 110px solid transparent;
    border-right: 110px solid transparent;
    border-bottom: 100px solid #A52A2A;
    position: absolute;
    top: -80px;
    left: 50%;
    transform: translateX(-50%);
}</code></pre>
                    `;
                    break;
                case 4:
                    instructions.innerHTML = `
                        <h2>Шаг 4: Добавить окна</h2>
                        <p>Напишите HTML код для окон. Используйте элемент <code>&lt;div class="window left"&gt;&lt;/div&gt; и &lt;div class="window right"&gt;&lt;/div&gt;</code>.</p>
                        <p>CSS должен содержать правила для:</p>
                        <ul>
                            <li>Ширина: 40px (ширина окна)</li>
                            <li>Высота: 40px (высота окна)</li>
                            <li>Цвет фона: белый (чтобы окно было белым)</li>
                            <li>Рамка: 2px solid черный (черная рамка вокруг окна)</li>
                            <li>Позиционирование: absolute (чтобы закрепить окна на стенах)</li>
                            <li>Верхний отступ: 30px (чтобы окно было на 30 пикселей от верха стены)</li>
                            <li>Левый отступ: 20px для левого окна и правый отступ: 20px для правого окна (чтобы окна были симметрично расположены)</li>
                        </ul>
                        <button class="btn btn-secondary" onclick="showHint(4)">Показать помощь</button>
                        <button class="btn btn-secondary" onclick="hideHint(4)" style="display:none;">Скрыть помощь</button>
                        <pre id="hint4" class="hint"><code>.window {
    width: 40px;
    height: 40px;
    background-color: #FFF;
    border: 2px solid #000;
    position: absolute;
    top: 30px;
}
.window.left {
    left: 20px;
}
.window.right {
    right: 20px;
}</code></pre>
                    `;
                    break;
                case 5:
                    instructions.innerHTML = `
                        <h2>Шаг 5: Установить дверь</h2>
                        <p>Напишите HTML код для двери. Используйте элемент <code>&lt;div class="door"&gt;&lt;/div&gt; с вложенным &lt;div class="doorknob"&gt;&lt;/div&gt;</code>.</p>
                        <p>CSS должен содержать правила для:</p>
                        <ul>
                            <li>Ширина: 60px (ширина двери)</li>
                            <li>Высота: 100px (высота двери)</li>
                            <li>Цвет фона: темно-коричневый (чтобы дверь была темно-коричневой)</li>
                            <li>Позиционирование: absolute (чтобы закрепить дверь на стенах)</li>
                            <li>Нижний отступ: 20px (чтобы дверь была внизу стены)</li>
                            <li>Левый отступ: 50% (чтобы дверь была по центру стены)</li>
                            <li>Трансформация: translateX(-50%) (чтобы скорректировать положение двери по центру)</li>
                        </ul>
                        <button class="btn btn-secondary" onclick="showHint(5)">Показать помощь</button>
                        <button class="btn btn-secondary" onclick="hideHint(5)" style="display:none;">Скрыть помощь</button>
                        <pre id="hint5" class="hint"><code>.door {
    width: 60px;
    height: 100px;
    background-color: #A52A2A;
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    border: 2px solid #000;
}
.doorknob {
    width: 10px;
    height: 10px;
    background-color: #DAA520;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
}</code></pre>
                    `;
                    break;
                case 6:
                    instructions.innerHTML = `
                        <h2>Поздравляем!</h2>
                        <p>Вы успешно построили дом!</p>
                    `;
                    break;
                default:
                    break;
            }
        }

        function showHint(step) {
            document.getElementById(`hint${step}`).style.display = 'block';
            document.querySelector(`button[onclick="showHint(${step})"]`).style.display = 'none';
            document.querySelector(`button[onclick="hideHint(${step})"]`).style.display = 'inline-block';
        }

        function hideHint(step) {
            document.getElementById(`hint${step}`).style.display = 'none';
            document.querySelector(`button[onclick="showHint(${step})"]`).style.display = 'inline-block';
            document.querySelector(`button[onclick="hideHint(${step})"]`).style.display = 'none';
        }
    </script>
</body>
</html>
